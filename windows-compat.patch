diff --git a/configure.ac b/configure.ac
index abc1234..def5678 100644
--- a/configure.ac
+++ b/configure.ac
@@ -42,7 +42,9 @@ AC_CHECK_HEADERS([ \
 	netdb.h \
 	netinet/in.h \
 	netinet/tcp.h \
-	arpa/inet.h \
+])
+AC_CHECK_HEADERS([arpa/inet.h],,,[
+#include <winsock2.h>
 ])
 AC_CHECK_HEADERS([sys/ioctl.h],,,[
 #if HAVE_SYS_SOCKET_H
